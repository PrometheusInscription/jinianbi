import{a as $,d as D,b,c as f,g as V,e as P,t as q,f as J,h as U,m as E,i as Z,j as G}from"./web3-nCPSK4fE.js";import{u as H}from"./market-KWVm7q0l.js";import{c as W,d as X,r as y,a as I,b as a,e as R,f as Y,n as M,g as k,u as C,h as K,S as F,X as Q,t as A,o as S,_ as O}from"./index-i9jkfvDY.js";const tt=W("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),et=BigInt(-1),c=BigInt(0),p=BigInt(1),it=BigInt(5),v={};let x="0000";for(;x.length<80;)x+=x;function m(r){let t=x;for(;t.length<r;)t+=t;return BigInt("1"+t.substring(0,r))}function w(r,t,i){const e=BigInt(t.width);if(t.signed){const s=p<<e-p;f(i==null||r>=-s&&r<s,"overflow","NUMERIC_FAULT",{operation:i,fault:"overflow",value:r}),r>c?r=U(E(r,e),e):r=-U(E(-r,e),e)}else{const s=p<<e;f(i==null||r>=0&&r<s,"overflow","NUMERIC_FAULT",{operation:i,fault:"overflow",value:r}),r=(r%s+s)%s&s-p}return r}function T(r){typeof r=="number"&&(r=`fixed128x${r}`);let t=!0,i=128,e=18;if(typeof r=="string"){if(r!=="fixed")if(r==="ufixed")t=!1;else{const o=r.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);b(o,"invalid fixed format","format",r),t=o[1]!=="u",i=parseInt(o[2]),e=parseInt(o[3])}}else if(r){const o=r,l=(d,h,u)=>o[d]==null?u:(b(typeof o[d]===h,"invalid fixed format ("+d+" not "+h+")","format."+d,o[d]),o[d]);t=l("signed","boolean",t),i=l("width","number",i),e=l("decimals","number",e)}b(i%8===0,"invalid FixedNumber width (not byte aligned)","format.width",i),b(e<=80,"invalid FixedNumber decimals (too large)","format.decimals",e);const s=(t?"":"u")+"fixed"+String(i)+"x"+String(e);return{signed:t,width:i,decimals:e,name:s}}function st(r,t){let i="";r<c&&(i="-",r*=et);let e=r.toString();if(t===0)return i+e;for(;e.length<=t;)e=x+e;const s=e.length-t;for(e=e.substring(0,s)+"."+e.substring(s);e[0]==="0"&&e[1]!==".";)e=e.substring(1);for(;e[e.length-1]==="0"&&e[e.length-2]!==".";)e=e.substring(0,e.length-1);return i+e}class g{format;#i;#t;#e;_value;constructor(t,i,e){$(t,v,"FixedNumber"),this.#t=i,this.#i=e;const s=st(i,e.decimals);D(this,{format:e.name,_value:s}),this.#e=m(e.decimals)}get signed(){return this.#i.signed}get width(){return this.#i.width}get decimals(){return this.#i.decimals}get value(){return this.#t}#r(t){b(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)}#s(t,i){return t=w(t,this.#i,i),new g(v,t,this.#i)}#n(t,i){return this.#r(t),this.#s(this.#t+t.#t,i)}addUnsafe(t){return this.#n(t)}add(t){return this.#n(t,"add")}#a(t,i){return this.#r(t),this.#s(this.#t-t.#t,i)}subUnsafe(t){return this.#a(t)}sub(t){return this.#a(t,"sub")}#o(t,i){return this.#r(t),this.#s(this.#t*t.#t/this.#e,i)}mulUnsafe(t){return this.#o(t)}mul(t){return this.#o(t,"mul")}mulSignal(t){this.#r(t);const i=this.#t*t.#t;return f(i%this.#e===c,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#s(i/this.#e,"mulSignal")}#l(t,i){return f(t.#t!==c,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#r(t),this.#s(this.#t*this.#e/t.#t,i)}divUnsafe(t){return this.#l(t)}div(t){return this.#l(t,"div")}divSignal(t){f(t.#t!==c,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#r(t);const i=this.#t*this.#e;return f(i%t.#t===c,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#s(i/t.#t,"divSignal")}cmp(t){let i=this.value,e=t.value;const s=this.decimals-t.decimals;return s>0?e*=m(s):s<0&&(i*=m(-s)),i<e?-1:i>e?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=this.#t;return this.#t<c&&(t-=this.#e-p),t=this.#t/this.#e*this.#e,this.#s(t,"floor")}ceiling(){let t=this.#t;return this.#t>c&&(t+=this.#e-p),t=this.#t/this.#e*this.#e,this.#s(t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const i=this.decimals-t,e=it*m(i-1);let s=this.value+e;const o=m(i);return s=s/o*o,w(s,this.#i,"round"),new g(v,s,this.#i)}isZero(){return this.#t===c}isNegative(){return this.#t<c}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return g.fromString(this.toString(),t)}static fromValue(t,i,e){const s=i==null?0:V(i),o=T(e);let l=P(t,"value");const d=s-o.decimals;if(d>0){const h=m(d);f(l%h===c,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),l/=h}else d<0&&(l*=m(-d));return w(l,o,"fromValue"),new g(v,l,o)}static fromString(t,i){const e=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);b(e&&e[2].length+e[3].length>0,"invalid FixedNumber string value","value",t);const s=T(i);let o=e[2]||"0",l=e[3]||"";for(;l.length<s.decimals;)l+=x;f(l.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),l=l.substring(0,s.decimals);const d=BigInt(e[1]+o+l);return w(d,s,"fromString"),new g(v,d,s)}static fromBytes(t,i){let e=q(J(t,"value"));const s=T(i);return s.signed&&(e=U(e,s.width)),w(e,s,"fromBytes"),new g(v,e,s)}}function rt(r,t){b(typeof r=="string","value must be a string","value",r);let i=18;return i=V(t,"unit"),g.fromString(r,{decimals:i,width:512}).value}function nt(r){return rt(r,18)}const at={class:"min-h-screen py-12 px-4 sm:px-6 lg:px-8 bg-china-paper relative overflow-hidden"},ot={class:"max-w-4xl mx-auto relative z-10"},lt={class:"flex justify-center perspective-1000"},dt={key:0,class:"absolute -bottom-12 left-0 right-0 text-center"},ut={class:"mt-16 text-center"},ct=["disabled"],ht={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ft={class:"relative bg-white rounded-2xl p-1 max-w-md w-full text-center animate-scale-up shadow-2xl overflow-hidden"},gt={class:"bg-china-paper p-8 rounded-xl relative overflow-hidden"},mt={class:"relative bg-white rounded-xl p-8 mb-8 shadow-inner border border-gray-100"},bt=["src"],vt={class:"text-2xl font-bold text-china-ink font-serif"},pt=X({__name:"Mint",setup(r){const t=y(!1),i=y(!1),e=y(null),s=y(""),o=H();async function l(){try{s.value="",t.value=!0;const{signer:u,address:n}=await Z(),N=await G(u),L="https://example.com/metadata/mystery",j={value:nt("0.01")},B=await N.mintItem(L,j);console.log("Transaction sent:",B.hash);const z=await B.wait();console.log("Transaction confirmed:",z);const _=o.mintCoin();_.owner=n,e.value=_,i.value=!0}catch(u){console.error("Minting failed",u),u.code==="ACTION_REJECTED"?s.value="Transaction rejected by user.":u.reason?s.value=u.reason:s.value=u.message||"Minting failed",alert(s.value)}finally{t.value=!1}}async function d(){if(!t.value)try{s.value="",t.value=!0,await new Promise(n=>setTimeout(n,2e3));const u=o.mintCoin();u.owner="TestUser",e.value=u,i.value=!0}catch(u){console.error("Test Minting failed",u)}finally{t.value=!1}}function h(){i.value=!1,e.value=null}return(u,n)=>(S(),I("div",at,[n[13]||(n[13]=a("div",{class:"absolute top-0 right-0 -mr-20 -mt-20 w-96 h-96 bg-china-gold/10 rounded-full blur-3xl"},null,-1)),n[14]||(n[14]=a("div",{class:"absolute bottom-0 left-0 -ml-20 -mb-20 w-80 h-80 bg-china-red/5 rounded-full blur-3xl"},null,-1)),a("div",ot,[n[8]||(n[8]=Y('<div class="text-center mb-16" data-v-1782090b><h1 class="text-4xl md:text-5xl font-bold text-china-ink font-serif mb-4" data-v-1782090b>Imperial Mint</h1><p class="text-xl text-gray-600" data-v-1782090b>Unlock the secrets of the dynasty. <br data-v-1782090b>Mint cost: <span class="text-china-red font-bold" data-v-1782090b>0.01 ETH</span></p><div class="mt-6 inline-flex items-center px-6 py-2 bg-white rounded-full shadow-sm border border-china-gold/30" data-v-1782090b><span class="text-gray-500 mr-2" data-v-1782090b>Status:</span><span class="text-china-gold font-bold text-lg" data-v-1782090b>Ready to Mint</span></div></div>',1)),a("div",lt,[a("div",{class:"relative group cursor-pointer",onClick:n[0]||(n[0]=N=>!t.value&&l())},[n[5]||(n[5]=a("div",{class:"absolute inset-0 bg-china-red blur-2xl opacity-20 group-hover:opacity-40 transition-opacity duration-500 rounded-full"},null,-1)),a("div",{class:M(["relative w-72 h-72 bg-gradient-to-br from-china-red to-china-ink rounded-3xl shadow-2xl flex items-center justify-center transform transition-all duration-700 group-hover:scale-105 group-hover:rotate-y-12 border-4 border-china-gold/50",{"animate-shake":t.value}])},[n[1]||(n[1]=a("div",{class:"absolute inset-4 border border-china-gold/30 rounded-2xl"},null,-1)),n[2]||(n[2]=a("div",{class:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10 mix-blend-overlay"},null,-1)),k(C(tt),{class:"h-32 w-32 text-china-gold drop-shadow-lg transform group-hover:scale-110 transition-transform duration-500"}),n[3]||(n[3]=a("div",{class:"absolute -top-4 -right-4 w-16 h-16 bg-china-gold rounded-full flex items-center justify-center shadow-lg border-2 border-white"},[a("span",{class:"font-serif font-bold text-china-red text-xl"},"Á¶è")],-1))],2),t.value?(S(),I("div",dt,[...n[4]||(n[4]=[a("span",{class:"text-china-red font-bold text-xl animate-pulse tracking-widest"},"MINTING...",-1)])])):R("",!0)])]),a("div",ut,[n[7]||(n[7]=a("p",{class:"text-sm text-gray-400 mb-3 font-serif italic"},"Just visiting? Try the experience without a wallet.",-1)),a("button",{onClick:d,disabled:t.value,class:"px-6 py-2 border-2 border-dashed border-gray-300 rounded-full text-gray-500 hover:border-china-gold hover:text-china-gold hover:bg-white transition-all font-serif flex items-center mx-auto gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[k(C(F),{class:"w-4 h-4"}),n[6]||(n[6]=K(" Test Mint Simulation ",-1))],8,ct)])]),i.value&&e.value?(S(),I("div",ht,[a("div",{class:"absolute inset-0 bg-china-ink/90 backdrop-blur-sm",onClick:h}),a("div",ft,[n[12]||(n[12]=a("div",{class:"absolute inset-0 border-8 border-china-gold/20 rounded-2xl pointer-events-none"},null,-1)),a("div",gt,[n[9]||(n[9]=a("div",{class:"absolute inset-0 bg-[conic-gradient(from_0deg,transparent_0_25deg,#D4AF37_45deg,transparent_65deg)] opacity-10 animate-spin-slow"},null,-1)),a("button",{onClick:h,class:"absolute top-4 right-4 text-gray-400 hover:text-china-red transition-colors"},[k(C(Q),{class:"h-6 w-6"})]),k(C(F),{class:"h-12 w-12 text-china-gold mx-auto mb-4 animate-bounce"}),n[10]||(n[10]=a("h2",{class:"text-3xl font-bold text-china-ink font-serif mb-2"},"Destiny Revealed!",-1)),n[11]||(n[11]=a("p",{class:"text-gray-500 mb-8"},"You have discovered a new treasure.",-1)),a("div",mt,[a("div",{class:M(["h-40 w-40 bg-gradient-to-br from-gray-100 to-white rounded-full mx-auto mb-6 flex items-center justify-center shadow-lg border-4 overflow-hidden",{"border-gray-300":e.value.rarity==="Common","border-blue-300":e.value.rarity==="Rare","border-china-gold":e.value.rarity==="Legendary","border-purple-400":e.value.rarity==="Epic"||e.value.rarity==="Mythical"}])},[a("img",{src:e.value.image,class:"w-full h-full object-cover animate-pulse"},null,8,bt)],2),a("h3",vt,A(e.value.name),1),a("div",{class:M(["mt-3 inline-flex px-4 py-1 rounded-full text-sm font-bold tracking-wide uppercase border",{"bg-gray-100 text-gray-600 border-gray-200":e.value.rarity==="Common","bg-blue-50 text-blue-600 border-blue-200":e.value.rarity==="Rare","bg-yellow-50 text-china-gold border-china-gold":e.value.rarity==="Legendary","bg-purple-50 text-purple-600 border-purple-200":e.value.rarity==="Epic"||e.value.rarity==="Mythical"}])},A(e.value.rarity),3)]),a("button",{onClick:h,class:"w-full btn-primary"}," Collect Treasure ")])])])):R("",!0)]))}}),kt=O(pt,[["__scopeId","data-v-1782090b"]]);export{kt as default};
